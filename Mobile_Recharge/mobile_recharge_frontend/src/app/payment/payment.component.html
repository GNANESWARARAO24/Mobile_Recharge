<div class="payment-wrapper">
  <div class="container py-4">
    <div class="payment-header">
      <h2 class="main-title">
        <i class="fas fa-credit-card me-2"></i>Complete Payment
      </h2>
      <button class="change-plan-btn" (click)="goBack()">
        <i class="fas fa-arrow-left me-2"></i>Change Plan
      </button>
    </div>

    <div class="payment-content">
      <!-- Left: Selected Plan -->
      <div class="plan-section">
        <h3 class="section-title">Selected Plan</h3>
        <div *ngIf="plan" class="plan-card">
          <div class="plan-header">
            <h3>{{ plan.name }}</h3>
            <div class="plan-price">â‚¹{{ plan.price }}</div>
          </div>
          <div class="plan-details">
            <div class="detail-item">
              <i class="fas fa-calendar"></i>
              <span>{{ plan.validityDays }} days validity</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-database"></i>
              <span>{{ plan.dataPerDay }}</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-phone"></i>
              <span>{{ plan.calls }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Payment Method -->
      <div class="payment-section">
        <h3 class="section-title">Payment Method</h3>
        <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()">
          <div class="payment-methods">
            <div class="payment-option" (click)="paymentForm.patchValue({paymentMethod: 'UPI'})" [class.active]="paymentForm.get('paymentMethod')?.value === 'UPI'">
              <i class="fas fa-mobile-alt"></i>
              <span>UPI</span>
            </div>
            <div class="payment-option" (click)="paymentForm.patchValue({paymentMethod: 'Card'})" [class.active]="paymentForm.get('paymentMethod')?.value === 'Card'">
              <i class="fas fa-credit-card"></i>
              <span>Card</span>
            </div>
          </div>

          <div *ngIf="paymentForm.get('paymentMethod')?.value === 'UPI'" class="payment-details">
            <label class="form-label">UPI ID</label>
            <input type="text" formControlName="paymentDetails" class="form-control" placeholder="user@upi" />
            <div *ngIf="paymentForm.get('paymentDetails')?.invalid && paymentForm.get('paymentDetails')?.touched" class="error-text">
              Enter valid UPI ID
            </div>
          </div>

          <div *ngIf="paymentForm.get('paymentMethod')?.value === 'Card'" class="payment-details">
            <label class="form-label">Card Number</label>
            <input type="text" formControlName="cardNumber" class="form-control" placeholder="1234567890123456" maxlength="16" />
            <div *ngIf="paymentForm.get('cardNumber')?.invalid && paymentForm.get('cardNumber')?.touched" class="error-text">
              Enter valid 16-digit card number
            </div>
            <div class="card-row">
              <div class="card-col">
                <label class="form-label">Expiry</label>
                <input type="text" formControlName="expiry" class="form-control" placeholder="MM/YY" maxlength="5" />
                <div *ngIf="paymentForm.get('expiry')?.invalid && paymentForm.get('expiry')?.touched" class="error-text">
                  Enter valid expiry
                </div>
              </div>
              <div class="card-col">
                <label class="form-label">CVV</label>
                <input type="password" formControlName="cvv" class="form-control" placeholder="123" maxlength="3" />
                <div *ngIf="paymentForm.get('cvv')?.invalid && paymentForm.get('cvv')?.touched" class="error-text">
                  Enter valid CVV
                </div>
              </div>
            </div>
          </div>

          <button type="submit" [disabled]="paymentForm.invalid" class="btn-action">
            <i class="fas fa-check-circle me-2"></i>Confirm Payment
          </button>

          <div *ngIf="errorMessage" class="error-alert">{{ errorMessage }}</div>
          <div *ngIf="successMessage" class="success-alert">{{ successMessage }}</div>
        </form>
      </div>
    </div>
  </div>
</div>
